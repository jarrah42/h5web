"use strict";(self.webpackChunkstorybook=self.webpackChunkstorybook||[]).push([[8702],{"../../packages/lib/src/interactions/box.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.object.set-prototype-of.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.object.get-prototype-of.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.reflect.construct.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.object.define-property.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.reflect.get.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.symbol.to-primitive.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.date.to-primitive.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.number.constructor.js");var three__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../node_modules/.pnpm/three@0.141.0/node_modules/three/build/three.module.js");function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,(arg=descriptor.key,key=void 0,"symbol"==typeof(key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string"))?key:String(key)),descriptor)}var arg,key}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function _get(target,property,receiver){var base=_superPropBase(target,property);if(base){var desc=Object.getOwnPropertyDescriptor(base,property);return desc.get?desc.get.call(arguments.length<3?target:receiver):desc.value}},_get.apply(this,arguments)}function _superPropBase(object,property){for(;!Object.prototype.hasOwnProperty.call(object,property)&&null!==(object=_getPrototypeOf(object)););return object}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){if(call&&("object"==typeof call||"function"==typeof call))return call;if(void 0!==call)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}var ZERO_VECTOR=new three__WEBPACK_IMPORTED_MODULE_12__.Vector3(0,0,0),Box=function(_Box){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),Object.defineProperty(subClass,"prototype",{writable:!1}),superClass&&_setPrototypeOf(subClass,superClass)}(Box,_Box);var _super=_createSuper(Box);function Box(){return _classCallCheck(this,Box),_super.apply(this,arguments)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}(Box,[{key:"size",get:function get(){var _this$getSize=this.getSize(new three__WEBPACK_IMPORTED_MODULE_12__.Vector3);return{width:_this$getSize.x,height:_this$getSize.y}}},{key:"center",get:function get(){return this.getCenter(new three__WEBPACK_IMPORTED_MODULE_12__.Vector3)}},{key:"clampPoint",value:function clampPoint(pt){return _get(_getPrototypeOf(Box.prototype),"clampPoint",this).call(this,pt,new three__WEBPACK_IMPORTED_MODULE_12__.Vector3)}},{key:"expandBySize",value:function expandBySize(width,height){return this.expandByVector(new three__WEBPACK_IMPORTED_MODULE_12__.Vector3(width/2,height/2,0))}},{key:"expandToRatio",value:function expandToRatio(ratio){if(void 0===ratio)return this;var _this$size=this.size,width=_this$size.width,height=_this$size.height;return width/height<ratio?this.expandBySize(height*ratio-width,0):this.expandBySize(0,width/ratio-height)}},{key:"hasMinSize",value:function hasMinSize(minWidth){var minHeight=arguments.length>1&&void 0!==arguments[1]?arguments[1]:minWidth,_this$size2=this.size,width=_this$size2.width,height=_this$size2.height;return width>=minWidth&&height>=minHeight}},{key:"keepWithin",value:function keepWithin(area){var center=this.center,size=this.size,_area$size=area.size,areaWidth=_area$size.width,areaHeight=_area$size.height,shift=Box.empty(area.center).expandBySize(Math.max(areaWidth-size.width,0),Math.max(areaHeight-size.height,0)).clampPoint(center).sub(center).setZ(0);return this.translate(shift)}},{key:"toRect",value:function toRect(){return[this.min,this.max]}}],[{key:"empty",value:function empty(){var center=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZERO_VECTOR;return new Box(center.clone(),center.clone())}},{key:"fromPoints",value:function fromPoints(){for(var _len=arguments.length,points=new Array(_len),_key=0;_key<_len;_key++)points[_key]=arguments[_key];return(new Box).setFromPoints(points)}},{key:"fromSize",value:function fromSize(_ref){var width=_ref.width,height=_ref.height;return Box.empty().expandBySize(width,height)}}]),Box}(three__WEBPACK_IMPORTED_MODULE_12__.Box3);__webpack_exports__.Z=Box},"../../packages/lib/src/vis/hooks.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Jk:function(){return useCameraState},Rn:function(){return useAxisDomain},_d:function(){return useCssColors},ay:function(){return useDomain},k9:function(){return useCombinedDomain},mq:function(){return useToArray},ne:function(){return useValueToIndexScale},y:function(){return useAxisValues}});__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.array.concat.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.string.trim.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.symbol.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.symbol.description.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.symbol.iterator.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.string.iterator.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.array.iterator.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/web.dom-collections.iterator.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.array.slice.js"),__webpack_require__("../../node_modules/.pnpm/core-js@3.26.0/node_modules/core-js/modules/es.array.from.js");var _h5web_shared__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../packages/shared/src/createMemo.ts"),_h5web_shared__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../packages/shared/src/utils.ts"),_h5web_shared__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../packages/shared/src/models-vis.ts"),_react_three_fiber__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../node_modules/.pnpm/@react-three+fiber@7.0.26_weaphyuqmcotibvxgot4zxypyi/node_modules/@react-three/fiber/dist/react-three-fiber.esm.js"),react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),_shared_VisCanvasProvider__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../packages/lib/src/vis/shared/VisCanvasProvider.tsx"),_utils__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../packages/lib/src/vis/utils.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||_unsupportedIterableToArray(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var useBounds=(0,_h5web_shared__WEBPACK_IMPORTED_MODULE_13__.d)(_h5web_shared__WEBPACK_IMPORTED_MODULE_14__.zX),useValidDomainForScale=(0,_h5web_shared__WEBPACK_IMPORTED_MODULE_13__.d)(_h5web_shared__WEBPACK_IMPORTED_MODULE_14__.To),useCombinedDomain=(0,_h5web_shared__WEBPACK_IMPORTED_MODULE_13__.d)(_utils__WEBPACK_IMPORTED_MODULE_15__.bM),useValueToIndexScale=(0,_h5web_shared__WEBPACK_IMPORTED_MODULE_13__.d)(_utils__WEBPACK_IMPORTED_MODULE_15__.jA),useAxisDomain=(0,_h5web_shared__WEBPACK_IMPORTED_MODULE_13__.d)(_utils__WEBPACK_IMPORTED_MODULE_15__.gl),useAxisValues=(0,_h5web_shared__WEBPACK_IMPORTED_MODULE_13__.d)(_utils__WEBPACK_IMPORTED_MODULE_15__.Bl),useToArray=(0,_h5web_shared__WEBPACK_IMPORTED_MODULE_13__.d)(_utils__WEBPACK_IMPORTED_MODULE_15__.qo);function useDomain(valuesArray){var scaleType=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_h5web_shared__WEBPACK_IMPORTED_MODULE_16__.N.Linear,errorArray=arguments.length>2?arguments[2]:void 0,bounds=useBounds(valuesArray,errorArray);return useValidDomainForScale(bounds,scaleType)}function useCameraState(factory,deps){var camera=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_17__.Ky)((function(state){return state.camera})),context=(0,_shared_VisCanvasProvider__WEBPACK_IMPORTED_MODULE_18__.k)(),_useState2=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_12__.useState)((function(){return factory(camera,context)})),2),state=_useState2[0],setState=_useState2[1];function updateState(){setState((function(){return factory(camera,context)}))}return(0,react__WEBPACK_IMPORTED_MODULE_12__.useEffect)(updateState,[camera,context].concat(_toConsumableArray(deps))),(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_17__.xQ)(updateState),state}function useCssColors(colorProperties){var _useState4=_slicedToArray((0,react__WEBPACK_IMPORTED_MODULE_12__.useState)(),2),styles=_useState4[0],setStyles=_useState4[1],refCallback=(0,react__WEBPACK_IMPORTED_MODULE_12__.useCallback)((function(elem){return setStyles(elem?window.getComputedStyle(elem):void 0)}),[setStyles]);return styles?[colorProperties.map((function(p){return styles.getPropertyValue(p).trim()})),refCallback]:[colorProperties.map((function(){return"transparent"})),refCallback]}},"../../packages/lib/src/vis/shared/VisCanvasProvider.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{k:function(){return useVisCanvasContext}});var _react_three_fiber__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../../node_modules/.pnpm/@react-three+fiber@7.0.26_weaphyuqmcotibvxgot4zxypyi/node_modules/@react-three/fiber/dist/react-three-fiber.esm.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js"),three__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("../../node_modules/.pnpm/three@0.141.0/node_modules/three/build/three.module.js"),_interactions_box__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../packages/lib/src/interactions/box.ts"),_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../../packages/lib/src/vis/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../node_modules/.pnpm/react@17.0.2/node_modules/react/jsx-runtime.js"),VisCanvasContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({});function useVisCanvasContext(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(VisCanvasContext)}function VisCanvasProvider(props){var visRatio=props.visRatio,abscissaConfig=props.abscissaConfig,ordinateConfig=props.ordinateConfig,svgOverlay=props.svgOverlay,floatingToolbar=props.floatingToolbar,children=props.children,canvasSize=(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.Ky)((function(state){return state.size})),visSize=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.Fy)(canvasSize,visRatio),width=canvasSize.width,height=canvasSize.height,canvasRatio=width/height,canvasBox=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return _interactions_box__WEBPACK_IMPORTED_MODULE_4__.Z.empty().expandByPoint(new three__WEBPACK_IMPORTED_MODULE_5__.Vector3(width,height))}),[width,height]),abscissaScale=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.Ct)(abscissaConfig,visSize.width),ordinateScale=(0,_utils__WEBPACK_IMPORTED_MODULE_3__.Ct)(ordinateConfig,visSize.height),dataToWorld=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(dataPt){return new three__WEBPACK_IMPORTED_MODULE_5__.Vector3(abscissaScale(dataPt.x),ordinateScale(dataPt.y))}),[abscissaScale,ordinateScale]),worldToData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(worldPt){return new three__WEBPACK_IMPORTED_MODULE_5__.Vector3(abscissaScale.invert(worldPt.x),ordinateScale.invert(worldPt.y))}),[abscissaScale,ordinateScale]),cameraToHtmlMatrix=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(new three__WEBPACK_IMPORTED_MODULE_5__.Matrix4).makeScale(width/2,-height/2,1).setPosition(width/2,height/2,0)}),[width,height]),cameraToHtmlMatrixInverse=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return cameraToHtmlMatrix.clone().invert()}),[cameraToHtmlMatrix]),worldToHtml=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(camera,worldPt){return worldPt.clone().project(camera).applyMatrix4(cameraToHtmlMatrix)}),[cameraToHtmlMatrix]),htmlToWorld=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(camera,htmlPt){return htmlPt.clone().applyMatrix4(cameraToHtmlMatrixInverse).unproject(camera)}),[cameraToHtmlMatrixInverse]),dataToHtml=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(camera,dataPt){return worldToHtml(camera,dataToWorld(dataPt))}),[dataToWorld,worldToHtml]),htmlToData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(camera,htmlPt){return worldToData(htmlToWorld(camera,htmlPt))}),[htmlToWorld,worldToData]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(VisCanvasContext.Provider,{value:{canvasSize:canvasSize,canvasRatio:canvasRatio,canvasBox:canvasBox,visRatio:visRatio,visSize:visSize,abscissaConfig:abscissaConfig,ordinateConfig:ordinateConfig,abscissaScale:abscissaScale,ordinateScale:ordinateScale,dataToWorld:dataToWorld,dataToHtml:dataToHtml,worldToHtml:worldToHtml,worldToData:worldToData,htmlToWorld:htmlToWorld,htmlToData:htmlToData,svgOverlay:svgOverlay,floatingToolbar:floatingToolbar},children:children})}VisCanvasProvider.displayName="VisCanvasProvider",__webpack_exports__.Z=VisCanvasProvider;try{VisCanvasProvider.displayName="VisCanvasProvider",VisCanvasProvider.__docgenInfo={description:"",displayName:"VisCanvasProvider",props:{visRatio:{defaultValue:null,description:"",name:"visRatio",required:!0,type:{name:"number | undefined"}},abscissaConfig:{defaultValue:null,description:"",name:"abscissaConfig",required:!0,type:{name:"AxisConfig"}},ordinateConfig:{defaultValue:null,description:"",name:"ordinateConfig",required:!0,type:{name:"AxisConfig"}},svgOverlay:{defaultValue:null,description:"",name:"svgOverlay",required:!0,type:{name:"SVGSVGElement | undefined"}},floatingToolbar:{defaultValue:null,description:"",name:"floatingToolbar",required:!0,type:{name:"HTMLDivElement | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["../../packages/lib/src/vis/shared/VisCanvasProvider.tsx#VisCanvasProvider"]={docgenInfo:VisCanvasProvider.__docgenInfo,name:"VisCanvasProvider",path:"../../packages/lib/src/vis/shared/VisCanvasProvider.tsx#VisCanvasProvider"})}catch(__react_docgen_typescript_loader_error){}},"../../packages/shared/src/createMemo.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{d:function(){return createMemo}});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../node_modules/.pnpm/react@17.0.2/node_modules/react/index.js");function createMemo(fn){return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return fn.apply(void 0,args)}),args)}}}}]);